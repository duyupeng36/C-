# 作业1：[[C 语言：基本概念#第一个 C 程序]]

## 问答题

从源代码生成可执行程序包含哪几个步骤，请用自己的话描述每个步骤的作用。

+ 预处理阶段：展开头文件和宏定义
+ 编译阶段：将预处理后的代码编为汇编代码
+ 汇编阶段：汇编代码转换为目标机器上的二进制代码(目标程序)
+ 链接阶段：链接系统引导代码和库函数代码形成可执行文件


预处理阶段会执行预处理指令，我们讲过哪几种预处理指令？编写带参数的宏 (宏函数) 应该注意哪些事项？宏函数优于普通函数的地方在哪里？

+ 目前我们学习了 `#include` 和 `#define` 指令
+ 在编写函数式宏式，宏参数需要使用 `()` 括起来，整个替换文本也要使用 `()` 括起来。
+ 宏函数是在预处理阶段就进行替换，不像普通函数那样需要压栈。宏函数效率比普通函数高

什么是进程？进程的虚拟内存空间包含哪几部分？

+ 进程：简单来讲就是 **正在执行的程序**。进程不单单只是程序指令，还包含一些内核数据结构
+ 进程虚拟内存空间包含：内核段，命令行参数段，堆区，栈区，数据区域(未初始化，初始化)，文本段

## 简答题

`double ans = 10.0 + 2.0 / 3.0 − 2.0 ∗ 2.0;` 请在适当的位置插入 `()`，使得 `ans = 11.0`

```c
double ans = 10.0 + 2.0 / ((3.0 - 2.0) * 2.0);
```

--- 

`double ans = 18.0 / SQUARED(2 + 1);` 如果宏函数定义如下，请写出对应 `ans` 的值。

```c
#define SQUARED(x) x*x
ans = 18.0 / 2 + 1 * 2 + 1 = 9.0 + 2 + 1 = 12.0;

#define SQUARED(x) (x*x)
ans = 18.0 / (2 + 1 * 2 + 1) = 18.0 / 5 = 3.6

#define SQUARED(x) (x)*(x)
ans = 18.0 / (2 + 1) * (2 + 1) = 18.0

#define SQUARED(x) ((x)*(x))
ans = 18.0 / ((2 + 1) * (2 + 1)) = 2.0
```

---

请解释下面代码为什么错了，并改正它。

```c
#include <stdio.h>

int function(int arg1)
{
	return arg1 - 1;
}

#define MESSAGE  "Happy new year!"
puts(MESSAGE);
```

`puts(MESSAGE);` 会被编译器识别为函数声明，然而函数声明中需要指定的时类型，而不是值
