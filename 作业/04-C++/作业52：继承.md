# 作业52：[[C++：继承]]

## 什么是继承？

继承是描述了类与类之间的共性的概念。C++ 中继承是描述类之间的层次关系。具体来讲派生类继承基类时相当于对基类进行了拷贝，派生类可以直接访问基类的非 `private` 成员

> [!tip] 
> 
> 继承描述了 `XXX` 是 `YYY` 的层次关系
> 

## 简述 C++ 的三种继承方式

C++ 提供了 $3$ 中继承方式 `private` `protected` 和 `public`，它们用于控制基类的非 `private` 的成员在派生类中的访问权限

+ `public` 继承方式：没有限制基类的非 `private` 成员的访问
+ `protected` 继承方式：限制基类的非 `private` 成员在派生类中的访问权限为 `protected`
+ `private` 继承方式：限制基类的非 `private` 成员在派生类中的访问权限为 `private`

## 多继承产生的问题

多继承带来的最主要的问题就 **成员访问的二义性** 和 **存储二义性**，也就是菱形继承问题。为了解决菱形继承的问题，C++ 让中间层基类虚拟继承顶层基类即可

> [!tip] 
> 
> 虚拟继承会改变派生类对象的内存布局。没有虚继承时，派生类对象会在开始位置存储基类子对象。但是，如果发生了虚拟继承，派生类对象只会在开始位置存储一个虚基类的指针，虚基类对象存储在派生类对象的最后
> 
> 没有虚继承时派生类对象的布局
> 
> ![[Pasted image 20250216195905.png]]
> 
> 虚继承时派生类对象的布局
> 
> ![[Pasted image 20250216201206.png]]
> 
> 

