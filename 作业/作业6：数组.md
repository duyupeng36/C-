# 作业6：[[数组]]

## 问答题

> [!question] 对于一个大小为 $N$ 的数组，它的下标范围是多少？
> 

+ 在 C 语言中，数组长度为 $N$，那么它的下标范围为 $[0, N-1]$

> [!question] 如何计算`arr[i]`的地址？

+ $Addr_i = \&arr + i \times \text{sizeof(arr[0])}$


> [!question] 为什么程序员会有这样一个刻板印象：数组的效率比链表高?
> 

+ 数组存储在一片连续的内存中，因此高速缓冲存储器的存在，可以一次性读取多个数组元素(局部性原理)
+ 数组只存储数据，而链表需要存储指向下一个元素的指针。数组的数据密度更高

> [!question] 写一个能计算数组大小的宏函数。

```c
#define SIZE(A) (sizeof(A)/sizeof(a[0]))
```



## 编程题

### 随机发牌

写一个随机发牌的小程序：用户指定发几张牌，程序打印手牌。

> [!question] 如何表示一副牌
> 
> 一副扑克牌的牌面由两种元素组成：**花色** 和 **点数**。我们使用两个数组存储这个两种元素。使用这个两个数组的下表表示一张牌
> 
> 怎样表示手中的扑克牌呢？使用一个二维数组 `in_hand[][]` 表示手上的牌。
> 

```c
#include <stdio.h>
#include <stdlib.h> // 提供 rand 和 srand 函数原型
#include <time.h>


#define ARRAY_SIZE(a) ((int)(sizeof(a) / sizeof((a)[0])))

// 一副扑克牌的点数
constexpr int ranks[] = {'3', '4', '5', '6', '7', '8', '9', 't', 'j', 'q', 'k', 'a'};
// 一副牌的花色：♦:d, ♣:c ♠:s ♥:h
constexpr int suits[] = {'d', 'c', 's', 'h'};


int main() {

    int numCards; // 手牌数
    int rank, suit; // 点数或花色的索引

    bool in_hand[ARRAY_SIZE(suits)][ARRAY_SIZE(ranks)] = {false}; // 标记牌面 (花色,点数) 是否在手中

    printf("Enter the number of cards in hand: "); //
    scanf("%d", &numCards);

    srand((unsigned) time(nullptr));

    printf("Your hand:");
    while (numCards > 0) {
        // 随机选择点数和花色
        rank = rand() % ARRAY_SIZE(ranks);
        suit = rand() % ARRAY_SIZE(suits);

        // 牌面不在手牌中
        if (!in_hand[suit][rank]) {
            in_hand[suit][rank] = true;
            numCards--;
            printf(" %c%c", ranks[rank], suits[suit]);
        }
    }

    printf("\n");

    return 0;
}
```
